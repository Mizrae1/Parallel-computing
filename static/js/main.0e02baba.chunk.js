(this["webpackJsonpeshop-ui"]=this["webpackJsonpeshop-ui"]||[]).push([[0],{100:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),r=c(17),i=c.n(r),s=(c(50),c(6)),d=c.n(s),o=(c(69),c(70),c(10)),l=c(8),j=c(12),b=c(109),h=c(104),u=c(7),O="http://localhost:8000/api/",x=O+"cart/current_customer_cart/",p=O+"category/",m=O+"product/",f=x+"add_to_cart/",g=O+"check-user-is-authenticated/",v=c(1);var N=function(t){var e=t.match,c=Object(a.useState)(),n=Object(j.a)(c,2),r=(n[0],n[1]),i=Object(a.useState)({is_authenticated:!1}),s=Object(j.a)(i,2),l=s[0],O=s[1],m=e.params.id,N=p+"".concat(m,"/category_products/"),y=Object(u.a)(N,(function(){return d.a.get(N).then((function(t){return t.data}))})),_=y.data,w=y.error;return Object(a.useEffect)((function(){d.a.get(g).then((function(t){return O({is_authenticated:t.data.is_authenticated})}))}),[]),Object(a.useEffect)((function(){d.a.get(p+"".concat(m,"/")).then((function(t){return r(t.data)}))}),[m]),_?w?"Error":Object(v.jsx)("div",{className:"row mt-5",children:_?_.results.map((function(t){return Object(v.jsx)("div",{className:"col-md-3 pt-5",children:Object(v.jsxs)(b.a,{style:{border:"none"},children:[Object(v.jsx)(b.a.Img,{variant:"top",src:t.image,fluid:!0}),Object(v.jsxs)(b.a.Body,{children:[Object(v.jsx)(b.a.Title,{className:"text-center",children:Object(v.jsx)(o.b,{to:{pathname:"/product/".concat(t.id,"/"),fromDashboard:!1},style:{textDecoration:"none"},children:t.title})}),Object(v.jsx)(b.a.Body,{children:Object(v.jsxs)("p",{className:"text-center",children:[" \u0426\u0435\u043d\u0430: ",Object(v.jsx)("strong",{children:t.price})," \u0440\u0443\u0431."]})}),Object(v.jsx)(b.a.Text,{})]}),t.in_cart?Object(v.jsx)(h.a,{variant:"default",size:"md",id:t.id,disabled:!0,children:"\u0422\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"}):"",l.is_authenticated&&!t.in_cart?Object(v.jsx)(h.a,{variant:"danger",size:"md",id:t.id,onClick:(e=t.id,function(t){t.preventDefault(),d.a.put(f+"".concat(e,"/")).then((function(){Object(u.b)(x),Object(u.b)(N)})).catch((function(t){alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0436\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435")}))}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}):""]})});var e})):""}):"No products"};var y=function(){var t=Object(a.useState)({is_authenticated:!1}),e=Object(j.a)(t,2),c=e[0],n=e[1],r=Object(u.a)(m,(function(){return d.a.get(m).then((function(t){return t.data}))})),i=r.data,s=r.error;return Object(a.useEffect)((function(){d.a.get(g).then((function(t){return n({is_authenticated:t.data.is_authenticated})}))}),[]),i?s?"Error":Object(v.jsx)("div",{className:"row mt-5",children:i?i.map((function(t){return Object(v.jsx)("div",{className:"col-md-3 pt-5",children:Object(v.jsxs)(b.a,{style:{border:"none"},children:[Object(v.jsx)(b.a.Img,{variant:"top",src:t.image,fluid:!0}),Object(v.jsxs)(b.a.Body,{children:[Object(v.jsx)(b.a.Title,{className:"text-center",children:Object(v.jsx)(o.b,{to:{pathname:"/product/".concat(t.id,"/"),fromDashboard:!1},style:{textDecoration:"none"},children:t.title})}),Object(v.jsx)(b.a.Body,{children:Object(v.jsxs)("p",{className:"text-center",children:[" \u0426\u0435\u043d\u0430: ",Object(v.jsx)("strong",{children:t.price})," \u0440\u0443\u0431."]})}),Object(v.jsx)(b.a.Text,{})]}),t.in_cart?Object(v.jsx)(h.a,{variant:"default",size:"md",id:t.id,disabled:!0,children:"\u0422\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"}):"",c.is_authenticated&&!t.in_cart?Object(v.jsx)(h.a,{variant:"danger",size:"md",id:t.id,onClick:(e=t.id,function(t){t.preventDefault(),d.a.put(f+"".concat(e,"/")).then((function(){Object(u.b)(x),Object(u.b)(m)})).catch((function(t){alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0436\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435")}))}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}):""]})});var e})):""}):"No products"};var _=function(){var t=Object(u.a)(x,(function(){return d.a.get(x).then((function(t){return t.data}))})),e=t.data,c=t.error;return e?c?"":(console.log(e),Object(v.jsxs)("div",{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430: ",Object(v.jsx)("span",{className:"badge bg-danger",children:e.total_products})]})):""};var w=function(){var t=Object(a.useState)([]),e=Object(j.a)(t,2),c=e[0],r=e[1],i=Object(a.useState)({is_authenticated:!1}),s=Object(j.a)(i,2),l=s[0],b=s[1];return Object(a.useEffect)((function(){d.a.get(g).then((function(t){return b({is_authenticated:t.data.is_authenticated})}))}),[]),Object(a.useEffect)((function(){d.a.get(p).then((function(t){r(t.data)})).catch((function(t){console.log(t)}))}),[]),Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)(o.b,{to:{pathname:"/",fromDashboard:!1},className:"navbar-brand",children:"E-Shop"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:[Object(v.jsxs)("ul",{className:"navbar-nav me-auto",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{to:{pathname:"/",fromDashboard:!1},className:"nav-link active",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(v.jsxs)("li",{className:"nav-item dropdown",children:[Object(v.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(v.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:c.map((function(t){return Object(v.jsx)(o.b,{className:"dropdown-item",to:{pathname:"/category/".concat(t.id,"/"),fromDashboard:!1},children:t.name})}))})]}),l.is_authenticated?"":Object(v.jsxs)(n.a.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{to:{pathname:"/login/",fromDashboard:!1},className:"nav-link text-decoration-none","aria-current":"page",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)("a",{className:"nav-link active","aria-current":"page",href:"/",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})]}),Object(v.jsx)("span",{className:"navbar-text",children:Object(v.jsx)(o.b,{to:{pathname:"/cart_detail/",fromDashboard:!1},style:{textDecoration:"none"},children:Object(v.jsx)(_,{})})})]})]})})},D=c(105),k=c(106),S=c(107);var C=function(){var t=Object(u.a)(x,(function(){return d.a.get(x).then((function(t){return t.data}))})),e=t.data,c=t.error;function a(t){return function(e){e.preventDefault(),d.a.put("http://localhost:8000/api/cart/current_customer_cart/remove_from_cart/"+"".concat(t,"/")).then((function(){return Object(u.b)(x)})).catch((function(t){alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d")}))}}return e?c?"error":(console.log(e,e.products),Object(v.jsx)("div",{style:{marginTop:"100px"},children:e.products&&"0.00"!==e.final_price?Object(v.jsxs)(D.a,{borderless:!0,style:{textAlign:"center",borderCollapse:"separate",borderSpacing:"0 20px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"\u0422\u043e\u0432\u0430\u0440"}),Object(v.jsx)("th",{children:"\u041a\u043e\u043b-\u0432\u043e"}),Object(v.jsx)("th",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(v.jsx)("th",{children:"\u0426\u0435\u043d\u0430 (\u0437\u0430 \u0448\u0442.)"}),Object(v.jsx)("th",{children:"\u041e\u0431\u0449\u0430\u044f \u0446\u0435\u043d\u0430"}),Object(v.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})]})}),Object(v.jsx)("tbody",{children:e.products.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.product.title}),Object(v.jsx)("td",{children:Object(v.jsx)("form",{children:Object(v.jsx)("input",{className:"form-control",min:"1",style:{width:"60px"},onChange:(e=t.id,function(t){t.preventDefault(),d.a.patch("http://localhost:8000/api/cart/current_customer_cart/change_qty/"+"".concat(t.target.value,"/").concat(e,"/")).then((function(){return Object(u.b)(x)}))}),type:"number",value:t.qty})})}),Object(v.jsx)("td",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(v.jsx)(k.a,{src:t.product.image,style:{width:"200px",height:"auto"},fluid:!0})}),Object(v.jsxs)("td",{children:[t.product.price," \u0440\u0443\u0431."]}),Object(v.jsxs)("td",{children:[t.final_price," \u0440\u0443\u0431."]}),Object(v.jsx)("td",{children:Object(v.jsx)(h.a,{variant:"danger",size:"md",id:t.id,onClick:a(t.id),block:!0,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"})})]});var e}))}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{}),Object(v.jsx)("td",{}),Object(v.jsx)("td",{}),Object(v.jsx)("td",{children:"\u0418\u0442\u043e\u0433\u043e"}),Object(v.jsxs)("td",{children:[Object(v.jsx)("strong",{children:e.final_price})," \u0440\u0443\u0431."]}),Object(v.jsx)("td",{style:{paddingBottom:"15px",paddingTop:"15px"},children:Object(v.jsx)(o.b,{to:{pathname:"/order/",fromDashboard:!1},style:{textDecoration:"none"},children:Object(v.jsx)(h.a,{variant:"outline-primary",block:!0,size:"md",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044e"})})})]})]}):Object(v.jsx)(S.a,{variant:"info",children:"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})})):"No data"};var E=function(){var t=Object(u.a)(x,(function(){return d.a.get(x).then((function(t){return t.data}))})),e=t.data,c=t.error;return e?c?"error":Object(v.jsx)("div",{style:{marginTop:"100px"},children:e.products&&"0.00"!==e.final_price?Object(v.jsx)(n.a.Fragment,{children:Object(v.jsxs)(D.a,{borderless:!0,style:{textAlign:"center",borderCollapse:"separate",borderSpacing:"0 20px"},children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"\u0422\u043e\u0432\u0430\u0440"}),Object(v.jsx)("th",{children:"\u041a\u043e\u043b-\u0432\u043e"}),Object(v.jsx)("th",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(v.jsx)("th",{children:"\u0426\u0435\u043d\u0430 (\u0437\u0430 \u0448\u0442.)"}),Object(v.jsx)("th",{children:"\u041e\u0431\u0449\u0430\u044f \u0446\u0435\u043d\u0430"})]})}),Object(v.jsx)("tbody",{children:e.products.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.product.title}),Object(v.jsx)("td",{children:t.qty}),Object(v.jsx)("td",{style:{verticalAlign:"middle",textAlign:"center"},children:Object(v.jsx)(k.a,{src:t.product.image,style:{width:"200px",height:"auto"},fluid:!0})}),Object(v.jsxs)("td",{children:[t.product.price," \u0440\u0443\u0431."]}),Object(v.jsxs)("td",{children:[t.final_price," \u0440\u0443\u0431."]})]})}))}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{}),Object(v.jsx)("td",{}),Object(v.jsx)("td",{}),Object(v.jsx)("td",{children:"\u0418\u0442\u043e\u0433\u043e"}),Object(v.jsxs)("td",{children:[Object(v.jsx)("strong",{children:e.final_price})," \u0440\u0443\u0431."]})]})]})}):Object(v.jsx)(S.a,{variant:"info",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u0430 \u0434\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430"})}):"No data"};var T=function(t){var e=t.match.params.id,c=m+"".concat(e,"/"),n=Object(a.useState)({is_authenticated:!1}),r=Object(j.a)(n,2),i=r[0],s=r[1];Object(a.useEffect)((function(){d.a.get(g).then((function(t){return s({is_authenticated:t.data.is_authenticated})}))}),[]);var o,l=Object(u.a)(c,(function(){return d.a.get(c).then((function(t){return t.data}))})),b=l.data,O=l.error;return b?O?"error":Object(v.jsx)("div",{style:{marginTop:"100px"},children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-4",children:Object(v.jsx)(k.a,{src:b.image,fluid:!0})}),Object(v.jsxs)("div",{className:"col-md-8",children:[Object(v.jsx)("p",{children:Object(v.jsx)("strong",{children:b.title})}),Object(v.jsxs)("p",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",b.description]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:["\u0426\u0435\u043d\u0430: ",Object(v.jsx)("strong",{children:b.price})," \u0440\u0443\u0431."]}),Object(v.jsxs)("p",{children:[b.in_cart?Object(v.jsx)(h.a,{variant:"default",size:"md",id:b.id,disabled:!0,children:"\u0422\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"}):"",i.is_authenticated&&!b.in_cart?Object(v.jsx)(h.a,{variant:"danger",size:"md",id:b.id,onClick:(o=b.id,function(t){t.preventDefault(),d.a.put(f+"".concat(o,"/")).then((function(){Object(u.b)(x),Object(u.b)(c)})).catch((function(t){alert("\u0422\u043e\u0432\u0430\u0440 \u0443\u0436\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435")}))}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}):""]})]})]})}):"No data"},B=c(108);var z=function(){var t=Object(a.useState)(""),e=Object(j.a)(t,2),c=e[0],n=e[1],r=Object(a.useState)(""),i=Object(j.a)(r,2),s=i[0],o=i[1],b=Object(a.useState)(!1),u=Object(j.a)(b,2),O=(u[0],u[1],Object(l.f)());return Object(a.useEffect)((function(){d.a.get(g).then((function(t){return t.data.is_authenticated?O.push("/"):""}))})),Object(v.jsx)("div",{style:{paddingTop:"100px"},className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-6 offset-2",children:[Object(v.jsx)("div",{className:"alert alert-warning alert-dismissible fade show",id:"error",role:"alert",style:{display:"none"},children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(v.jsxs)(B.a,{children:[Object(v.jsxs)(B.a.Group,{controlId:"formBasicLogin",className:"mb-3",children:[Object(v.jsx)(B.a.Label,{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(v.jsx)(B.a.Control,{type:"text",value:c,onChange:function(t){n(t.target.value)},placeholder:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d"})]}),Object(v.jsxs)(B.a.Group,{controlId:"formBasicPassword",className:"mb-3",children:[Object(v.jsx)(B.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(v.jsx)(B.a.Control,{type:"password",value:s,onChange:function(t){o(t.target.value)},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})]}),Object(v.jsx)(h.a,{variant:"primary",type:"button",onClick:function(t){t.preventDefault(),d.a.post("http://localhost:8000/api/token/",{username:c,password:s}).then((function(t){200==t.status&&(localStorage.setItem("token",t.data.access,""),window.location.href="/")})).catch((function(t){401!=t.response.status&&400!=t.response.status||(document.getElementById("error").style.display="block")}))},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};localStorage.getItem("token")?d.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"):d.a.defaults.headers.common.Authorization="";var I=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(o.a,{children:[Object(v.jsx)(w,{}),Object(v.jsx)("div",{className:"container mt-3",children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{path:"/",exact:!0,component:y}),Object(v.jsx)(l.a,{path:"/order/",exact:!0,component:E}),Object(v.jsx)(l.a,{path:"/login/",exact:!0,component:z}),Object(v.jsx)(l.a,{path:"/cart_detail/",exact:!0,component:C}),Object(v.jsx)(l.a,{path:"/product/:id",exact:!0,component:T}),Object(v.jsx)(l.a,{path:"/category/:id",exact:!0,component:N})]})})]})})},A=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,110)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;c(t),a(t),n(t),r(t),i(t)}))};i.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root")),A()},50:function(t,e,c){}},[[100,1,2]]]);
//# sourceMappingURL=main.0e02baba.chunk.js.map